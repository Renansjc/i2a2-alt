# agents/config/tasks.yaml
# Configura√ß√£o OTIMIZADA das tarefas para o sistema multi-agente de NF-e

analyze_intent:
  description: >
    Analise a mensagem do usu√°rio: "{message}"
    
    Contexto da conversa: {chat_history}
    
    ‚ö†Ô∏è PRIORIDADE: Verifique se √© FOLLOW-UP antes de classificar!
    
    FOLLOW-UP (usa contexto, n√£o precisa de banco):
    ‚úì Perguntas que se referem a algo j√° mencionado
    ‚úì Palavras-chave: "qual foi", "quanto foi", "e o/a", "aquele", "esse", "anterior"
    ‚úì Exemplos: "Qual foi o nome?", "E a empresa?", "Quanto foi mesmo?"
    ‚Üí Classificar como: **conversation_only** (usar√° contexto)
    
    DATABASE_QUERY (precisa consultar banco):
    ‚úì Valores, quantidades, totais NOVOS (Ex: "quanto vendemos?", "qual o valor total?")
    ‚úì Datas espec√≠ficas (Ex: "vendas de janeiro", "notas de hoje")
    ‚úì Empresas/clientes (Ex: "notas da empresa X", "maiores clientes")
    ‚úì Produtos (Ex: "produtos mais vendidos", "quais itens foram vendidos")
    ‚úì Impostos (Ex: "total de ICMS", "quanto pagamos de PIS")
    ‚úì Estat√≠sticas (Ex: "m√©dia de vendas", "top 10 produtos")
    ‚úì Compara√ß√µes (Ex: "vendas este m√™s vs m√™s passado")
    
    CONVERSATION_ONLY (resposta direta sem banco):
    ‚úì Sauda√ß√µes (Ex: "ol√°", "bom dia", "oi")
    ‚úì Agradecimentos (Ex: "obrigado", "valeu")
    ‚úì Perguntas sobre o sistema (Ex: "o que voc√™ pode fazer?", "como funciona?")
    ‚úì Explica√ß√µes gerais (Ex: "o que √© NF-e?", "como importar notas?")
    ‚úì Confirma√ß√µes (Ex: "ok", "entendi", "certo")
    ‚úì FOLLOW-UPS (perguntas sobre resposta anterior)
    
    EXEMPLOS:
    - "Quanto vendemos em janeiro?" ‚Üí database_query
    - "Qual foi o valor mesmo?" ‚Üí conversation_only (follow-up)
    - "Quais os 5 produtos mais vendidos?" ‚Üí database_query
    - "E o nome da empresa?" ‚Üí conversation_only (follow-up)
    - "Ol√°, tudo bem?" ‚Üí conversation_only
  
  expected_output: >
    JSON com:
    {
      "strategy": "database_query" ou "conversation_only",
      "confidence": "high" ou "medium" ou "low",
      "is_follow_up": true/false,
      "reasoning": "breve justificativa (1-2 frases)",
      "detected_entities": {
        "time_period": "se houver refer√™ncia a per√≠odo",
        "companies": ["se houver men√ß√£o a empresas"],
        "products": ["se houver men√ß√£o a produtos"],
        "metrics": ["valores mencionados: total, m√©dia, quantidade, etc"]
      }
    }
  
  agent: coordenador

execute_sql_query:
  description: >
    ‚ö†Ô∏è ATEN√á√ÉO: Antes de executar query, verifique se a informa√ß√£o J√Å est√° no contexto!
    
    Contexto dispon√≠vel: {chat_history}
    
    Se a resposta est√° no contexto acima, N√ÉO execute query - responda usando o contexto.
    
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    Execute uma consulta SQL para responder: "{message}"
    
    Schema dispon√≠vel: {database_schema}
    
    Entidades detectadas: {detected_entities}
    
    PROCESSO OBRIGAT√ìRIO:
    
    1. VERIFICAR CONTEXTO PRIMEIRO
       - Se a informa√ß√£o J√Å foi consultada, est√° no contexto acima
       - N√ÉO execute a mesma query novamente
       - Use o resultado anterior do contexto
    
    2. AN√ÅLISE DA PERGUNTA (se precisar de query nova)
       - Identifique o objetivo (total? lista? compara√ß√£o? m√©dia?)
       - Identifique filtros (per√≠odo, empresa, produto, status)
       - Identifique agrega√ß√µes necess√°rias (SUM, COUNT, AVG, etc)
    
    3. SELE√á√ÉO DE TABELAS
       - notas_fiscais: para dados gerais da NF
       - empresas: para emitentes/destinat√°rios
       - nf_itens: para produtos/servi√ßos
       - nf_itens_icms/ipi/pis/cofins: para impostos
       - nf_pagamentos: para formas de pagamento
    
    4. CONSTRU√á√ÉO DA QUERY
       - Use SELECT com colunas espec√≠ficas (nunca SELECT *)
       - Use JOINs apropriados (INNER para obrigat√≥rio, LEFT para opcional)
       - Adicione WHERE com filtros relevantes
       - SEMPRE filtre status='autorizada' (notas v√°lidas)
       - Use GROUP BY para agrega√ß√µes
       - Use ORDER BY para ordena√ß√£o l√≥gica
       - SEMPRE adicione LIMIT (m√°x 100)
    
    5. VALIDA√á√ÉO
       - Apenas SELECT permitido (nunca INSERT/UPDATE/DELETE)
       - Sintaxe PostgreSQL v√°lida
       - Aliases descritivos nas colunas
       - Valores monet√°rios como NUMERIC
    
    6. FORMATA√á√ÉO
       - Use TO_CHAR para formatar datas
       - Use ROUND para valores monet√°rios (2 casas)
       - Use aliases leg√≠veis (total_vendas, quantidade_produtos, etc)
    
    ‚ö†Ô∏è REGRAS ANTI-LOOP:
    - M√°ximo 2 tentativas por query
    - Se query falhar, N√ÉO tente exatamente igual
    - Se falhar 2x, responda com o que conseguiu
    - NUNCA execute a mesma query que est√° no contexto
    
    EXEMPLOS DE QUERIES BEM FEITAS:
    
    Pergunta: "Quanto vendemos este m√™s?"
    ```sql
    SELECT 
      COUNT(*) as total_notas,
      ROUND(SUM(valor_total_nota)::numeric, 2) as valor_total,
      ROUND(AVG(valor_total_nota)::numeric, 2) as valor_medio
    FROM notas_fiscais
    WHERE status = 'autorizada'
      AND DATE_TRUNC('month', data_hora_emissao) = DATE_TRUNC('month', CURRENT_DATE)
    LIMIT 1;
    ```
    
    Pergunta: "Top 5 produtos mais vendidos"
    ```sql
    SELECT 
      i.descricao_produto as produto,
      SUM(i.quantidade_comercial) as quantidade_total,
      ROUND(SUM(i.valor_total_bruto)::numeric, 2) as valor_total
    FROM nf_itens i
    INNER JOIN notas_fiscais nf ON i.nota_fiscal_id = nf.id
    WHERE nf.status = 'autorizada'
    GROUP BY i.descricao_produto
    ORDER BY quantidade_total DESC
    LIMIT 5;
    ```
    
    Pergunta: "Gere empresa aleat√≥ria"
    ```sql
    SELECT 
      id,
      razao_social,
      cpf_cnpj,
      nome_fantasia
    FROM empresas
    ORDER BY RANDOM()
    LIMIT 1;
    ```
  
  expected_output: >
    JSON estruturado:
    {
      "query": "SQL query executada (para auditoria)",
      "results": [array de objetos com os dados],
      "row_count": n√∫mero de registros retornados,
      "summary": "resumo breve (ex: 'Encontradas 5 notas totalizando R$ 10.000')",
      "execution_time_ms": tempo de execu√ß√£o em milissegundos,
      "columns": ["lista de colunas retornadas"]
    }
  
  agent: sql_specialist

format_response:
  description: >
    ‚ö†Ô∏è IMPORTANTE: Verifique o contexto ANTES de formatar!
    
    Contexto da conversa: {chat_history}
    
    Se o usu√°rio perguntou sobre algo J√Å mencionado (follow-up):
    ‚Üí Use informa√ß√£o do CONTEXTO, n√£o dos dados da consulta
    
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    Formate os dados em uma resposta natural e profissional:
    
    Dados da consulta: {query_results}
    Mensagem original: "{message}"
    
    DIRETRIZES DE FORMATA√á√ÉO:
    
    1. ESTRUTURA DA RESPOSTA
       ‚úì Comece respondendo diretamente √† pergunta
       ‚úì Apresente os principais dados/destaques
       ‚úì Forne√ßa detalhes adicionais se relevante
       ‚úì Conclua com oferta de ajuda adicional
    
    2. FORMATA√á√ÉO DE VALORES
       ‚úì Monet√°rios: R$ 1.234,56 (com separadores)
       ‚úì Grandes n√∫meros: 1.234 (separador de milhares)
       ‚úì Percentuais: 15,5% (uma casa decimal)
       ‚úì Datas: 27/10/2025 ou "outubro de 2025"
    
    3. ORGANIZA√á√ÉO VISUAL
       ‚úì Use listas numeradas para rankings
       ‚úì Use bullet points para itens n√£o ordenados
       ‚úì Use negrito para destacar valores importantes
       ‚úì Separe se√ß√µes com quebras de linha
    
    4. TOM E ESTILO
       ‚úì Profissional mas acess√≠vel
       ‚úì Conciso mas completo
       ‚úì Use contexto da conversa para personalizar
       ‚úì Evite jarg√£o t√©cnico desnecess√°rio
    
    5. CONTEXTUALIZA√á√ÉO
       ‚úì Compare com per√≠odos anteriores quando relevante
       ‚úì Destaque tend√™ncias ou padr√µes
       ‚úì Adicione insights quando apropriado
       ‚úì Sugira an√°lises complementares
    
    EXEMPLOS DE BOAS RESPOSTAS:
    
    Para query de vendas mensais:
    ```
    Em outubro de 2025, foram emitidas 45 notas fiscais totalizando R$ 125.430,50.
    
    Isso representa:
    ‚Ä¢ Valor m√©dio por nota: R$ 2.787,34
    ‚Ä¢ 15% a mais que setembro
    ‚Ä¢ Maior volume do trimestre
    
    Gostaria de ver o detalhamento por produto ou por cliente?
    ```
    
    Para ranking de produtos:
    ```
    Os 5 produtos mais vendidos em outubro foram:
    
    1. Produto A - 234 unidades (R$ 45.600,00)
    2. Produto B - 189 unidades (R$ 32.150,00)
    3. Produto C - 156 unidades (R$ 28.900,00)
    4. Produto D - 142 unidades (R$ 25.340,00)
    5. Produto E - 138 unidades (R$ 23.780,00)
    
    Total: 859 unidades vendidas, R$ 155.770,00 em receita.
    
    Posso detalhar algum produto espec√≠fico?
    ```
    
    Para empresa aleat√≥ria:
    ```
    A empresa selecionada foi:
    
    Nome: [Raz√£o Social]
    CNPJ: [XX.XXX.XXX/XXXX-XX]
    Nome Fantasia: [Se houver]
    
    Quer ver as notas fiscais dessa empresa?
    ```
    
    Para follow-up "Qual foi o nome?":
    ```
    [Buscar no contexto o nome da empresa mencionada]
    
    A empresa era [Nome da Empresa].
    
    Posso buscar mais informa√ß√µes sobre ela?
    ```
  
  expected_output: >
    Resposta em linguagem natural que:
    - Responde diretamente √† pergunta do usu√°rio
    - Usa contexto quando √© follow-up
    - Formata valores corretamente (R$, %, datas)
    - Organiza informa√ß√£o de forma clara
    - Adiciona contexto e insights relevantes
    - Mant√©m tom profissional e prestativo
    - Oferece pr√≥ximos passos
  
  agent: conversation_specialist

direct_conversation:
  description: >
    ‚ö†Ô∏è ESTA TASK √â PARA FOLLOW-UPS E CONVERSA√á√ÉO!
    
    Contexto completo da conversa: {chat_history}
    
    Mensagem do usu√°rio: "{message}"
    
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    INSTRU√á√ïES:
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    1. SE √â FOLLOW-UP (refere-se a resposta anterior):
       ‚Üí Busque informa√ß√£o no CONTEXTO acima
       ‚Üí N√ÉO invente informa√ß√µes
       ‚Üí Cite o que foi mencionado anteriormente
       
       Exemplos:
       - "Qual foi o nome?" ‚Üí Buscar empresa/nome no contexto
       - "Quanto foi mesmo?" ‚Üí Buscar valor no contexto
       - "E a empresa?" ‚Üí Buscar empresa mencionada
    
    2. SE √â CONVERSA√á√ÉO GERAL:
       ‚Üí Responda de forma amig√°vel
       ‚Üí Use as diretrizes abaixo
    
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    TIPOS DE INTERA√á√ÉO:
    
    1. SAUDA√á√ïES
       - Responda de forma amig√°vel e profissional
       - Apresente brevemente suas capacidades
       - Ofere√ßa exemplos de perguntas
    
    2. AGRADECIMENTOS
       - Reconhe√ßa o agradecimento
       - Ofere√ßa ajuda adicional
       - Mantenha a conversa aberta
    
    3. PERGUNTAS SOBRE O SISTEMA
       - Explique funcionalidades de forma clara
       - D√™ exemplos pr√°ticos
       - Direcione para pr√≥ximas a√ß√µes
    
    4. EXPLICA√á√ïES DE CONCEITOS
       - Explique de forma acess√≠vel
       - Use analogias quando apropriado
       - Ofere√ßa informa√ß√µes complementares
    
    5. CONFIRMA√á√ïES
       - Confirme entendimento
       - Pergunte se precisa de mais detalhes
       - Sugira pr√≥ximos passos
    
    6. FOLLOW-UPS ‚≠ê NOVO
       - Busque no contexto acima
       - Cite informa√ß√£o mencionada antes
       - Ofere√ßa aprofundar o t√≥pico
    
    INFORMA√á√ïES DO SISTEMA:
    
    CAPACIDADES:
    ‚Ä¢ An√°lise de notas fiscais eletr√¥nicas (NF-e)
    ‚Ä¢ Consultas sobre vendas, produtos, clientes
    ‚Ä¢ C√°lculos de impostos (ICMS, IPI, PIS, COFINS)
    ‚Ä¢ Estat√≠sticas e relat√≥rios personalizados
    ‚Ä¢ Compara√ß√µes entre per√≠odos
    ‚Ä¢ Rankings e top listas
    
    EXEMPLOS DE PERGUNTAS:
    ‚Ä¢ "Quanto vendemos este m√™s?"
    ‚Ä¢ "Quais s√£o os produtos mais vendidos?"
    ‚Ä¢ "Mostre as notas da empresa XYZ"
    ‚Ä¢ "Qual o total de ICMS pago em outubro?"
    ‚Ä¢ "Gere uma empresa aleat√≥ria do banco"
    
    EXEMPLOS DE RESPOSTAS:
    
    Para "Ol√°":
    ```
    Ol√°! üëã Sou seu assistente de an√°lise de notas fiscais eletr√¥nicas.
    
    Posso ajud√°-lo a:
    ‚Ä¢ Consultar vendas e faturamento
    ‚Ä¢ Analisar produtos e clientes
    ‚Ä¢ Verificar impostos e pagamentos
    ‚Ä¢ Gerar relat√≥rios personalizados
    
    Por exemplo, voc√™ pode perguntar:
    "Quanto vendemos este m√™s?" ou "Gere uma empresa aleat√≥ria"
    
    Como posso ajudar voc√™ hoje?
    ```
    
    Para follow-up "Qual foi o nome da empresa?":
    ```
    [Buscar no contexto acima]
    
    A empresa mencionada foi [Nome encontrado no contexto].
    
    Quer ver as notas fiscais dessa empresa?
    ```
    
    Para "Obrigado":
    ```
    Por nada! üòä Fico feliz em ajudar.
    
    Se precisar de mais an√°lises ou tiver outras d√∫vidas sobre suas notas
    fiscais, estou aqui.
    
    At√© logo!
    ```
  
  expected_output: >
    Resposta conversacional que:
    - Usa contexto para follow-ups
    - Mant√©m tom amig√°vel e profissional
    - Fornece informa√ß√µes √∫teis e relevantes
    - Oferece exemplos pr√°ticos
    - Encoraja continua√ß√£o da conversa
    - √â concisa mas completa
  
  agent: conversation_specialist

fiscal_analysis:
  description: >
    ‚ö†Ô∏è PRIMEIRO: A pergunta "{message}" √© uma pergunta FISCAL ou apenas de DADOS?
    
    Dados dispon√≠veis: {query_results}
    
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    DECIS√ÉO CR√çTICA:
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    PERGUNTAS FISCAIS (fa√ßa an√°lise completa):
    ‚úì Cont√©m palavras: "carga tribut√°ria", "impostos", "fiscal", "cr√©dito",
      "al√≠quota", "CST", "CFOP", "conformidade", "auditoria", "ST"
    ‚úì Pede an√°lise, interpreta√ß√£o ou orienta√ß√£o tribut√°ria
    ‚úì Compara tributa√ß√£o entre per√≠odos
    
    PERGUNTAS DE DADOS (apenas formate, SEM an√°lise):
    ‚úó "Quantas notas...", "Qual o total...", "Mostre...", "Liste..."
    ‚úó Pede apenas n√∫meros, listas, rankings
    ‚úó N√£o menciona aspectos tribut√°rios
    
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    SE FOR PERGUNTA DE DADOS (maioria dos casos):
    ‚Üí Apenas formate os dados de {query_results}
    ‚Üí Use linguagem simples e direta
    ‚Üí N√ÉO adicione contexto fiscal
    ‚Üí N√ÉO d√™ recomenda√ß√µes tribut√°rias
    ‚Üí N√ÉO use emojis fiscais (üìä, üîç, ‚ö†Ô∏è)
    ‚Üí Seja objetivo: "Voc√™ tem X notas fiscais."
    
    SE FOR PERGUNTA FISCAL (raro):
    ‚Üí Fa√ßa an√°lise tribut√°ria completa
    ‚Üí Calcule indicadores (carga, al√≠quotas efetivas)
    ‚Üí Identifique riscos e oportunidades
    ‚Üí D√™ recomenda√ß√µes espec√≠ficas
    ‚Üí Use formata√ß√£o profissional
    
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    EXEMPLOS:
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    Pergunta: "Quantas notas fiscais eu tenho?"
    Tipo: DADOS
    Resposta:
    ```
    Voc√™ possui 10 notas fiscais autorizadas.
    ```
    
    Pergunta: "Qual minha carga tribut√°ria?"
    Tipo: FISCAL
    Resposta:
    ```
    üìä CARGA TRIBUT√ÅRIA EFETIVA
    
    Sua carga tribut√°ria √© de 23,45%.
    
    COMPOSI√á√ÉO:
    ‚Ä¢ ICMS: 17,00%
    ‚Ä¢ PIS: 1,65%
    ‚Ä¢ COFINS: 7,60%
    ‚Ä¢ IPI: 3,00%
    
    RECOMENDA√á√ïES:
    ‚Ä¢ Verificar cr√©ditos de ICMS n√£o aproveitados
    ‚Ä¢ Analisar benef√≠cios fiscais dispon√≠veis
    ```
  
  expected_output: >
    Para perguntas de DADOS: resposta direta e objetiva, sem an√°lise fiscal.
    Para perguntas FISCAIS: an√°lise tribut√°ria completa com recomenda√ß√µes.
  
  agent: fiscal_specialist
